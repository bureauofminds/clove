package com.spice.clove.plugin.facebook.column.control
{
	import com.spice.clove.plugin.column.ColumnMetaData;
	import com.spice.clove.plugin.column.ICloveColumn;
	import com.spice.clove.plugin.column.control.ColumnController;
	import com.spice.utils.queue.cue.StateCue;
	import com.spice.clove.plugin.column.render.ICloveColumnItemRenderer;
	import com.spice.clove.plugin.control.IPluginController;
	import com.spice.clove.plugin.facebook.CloveFacebookPlugin;
	import com.spice.clove.plugin.facebook.cue.FacebookCallCue;
	import com.spice.clove.plugin.facebook.icons.FacebookIcons;
	import com.spice.utils.EmbedUtil;
	import com.spice.utils.queue.cue.Cue;
	import com.spice.utils.queue.cue.ICue;
	
	public class FacebookColumnController extends ColumnController
	{
		
		//--------------------------------------------------------------------------
   	    //
        //  Constructor
        //
        //--------------------------------------------------------------------------
        
        /**
		 */
		 
		
		public function FacebookColumnController(controller:IPluginController,itemRenderer:ICloveColumnItemRenderer)
		{
			super(itemRenderer);
			
			
			
			if(controller)
				this.pluginController = controller;
		}
		
		//--------------------------------------------------------------------------
   	    //
        //  Public Methods
        //
        //--------------------------------------------------------------------------
        
        /**
		 */
		
		override public function set column(value:ICloveColumn):void
		{
			super.column = value;
			
			value.metadata.saveSetting(ColumnMetaData.COLUMN_ICON,EmbedUtil.toImageByteArray(FacebookIcons.FACEBOOK_ICON_16));
		}
		
		//--------------------------------------------------------------------------
   	    //
        //  Protected Methods
        //
        //--------------------------------------------------------------------------
        
        /**
		 */
		 
		
		protected function call(call:*,resultCallback:Function = null):void
		{
			var c:ICue = call is ICue ? call : new FacebookCallCue(call,resultCallback);
			
			
			this.setLoadCue(StateCue(c));
			
			CloveFacebookPlugin(this.pluginController.plugin).call(c);
		}

	}
}